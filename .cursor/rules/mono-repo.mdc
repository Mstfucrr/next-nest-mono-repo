---
globs: apps/**/*.ts,apps/**/*.md,apps/**/*.json
alwaysApply: false
---

<!--
Glob: **/*.{js,ts,json,md}
-->

# ğŸ—ï¸ MONO_REPO GENEL RULES

## ğŸ“ Proje YapÄ±sÄ±

```bash
mono-repo/
â”œâ”€â”€ .prettierrc.js          # Ortak Prettier konfigÃ¼rasyonu
â”œâ”€â”€ .prettierignore         # Formatlanmayacak dosyalar
â”œâ”€â”€ package.json            # Root scripts ve workspace yÃ¶netimi
â”œâ”€â”€ pnpm-lock.yaml         # Lock file (commit edilmeli)
â””â”€â”€ apps/
    â”œâ”€â”€ api/               # Backend (NestJS)
    â””â”€â”€ web/               # Frontend (Next.js)
```

## ğŸš€ Script KullanÄ±mÄ±

### Root KomutlarÄ±

```bash
# TÃ¼m projeleri Ã§alÄ±ÅŸtÄ±r
pnpm dev                    # API + Web paralel
pnpm dev:api               # Sadece API
pnpm dev:web               # Sadece Web

# Build iÅŸlemleri
pnpm build:api             # API build
pnpm build:web             # Web build

# Code Quality
pnpm format                # TÃ¼m dosyalarÄ± formatla
pnpm format:check          # Format kontrolÃ¼
pnpm lint                  # ESLint kontrolÃ¼
```

### Proje BazlÄ± Komutlar

```bash
# API projesi iÃ§in
pnpm --filter api start:dev
pnpm --filter api build
pnpm --filter api format

# Web projesi iÃ§in
pnpm --filter web dev
pnpm --filter web build
pnpm --filter web format
```

## ğŸ“¦ Package Management

### Yeni Paket Ekleme

```bash
# Root'a paket ekleme
pnpm add -w <package-name>

# API'ye paket ekleme
pnpm --filter api add <package-name>

# Web'e paket ekleme
pnpm --filter web add <package-name>

# Dev dependency ekleme
pnpm --filter web add -D <package-name>
```

### Workspace BaÄŸÄ±mlÄ±lÄ±klarÄ±

```bash
# API'den Web'e baÄŸÄ±mlÄ±lÄ±k
pnpm --filter web add api@workspace:*

# Web'den API'ye baÄŸÄ±mlÄ±lÄ±k (gerekirse)
pnpm --filter api add web@workspace:*
```

## ğŸ”§ KonfigÃ¼rasyon

### Prettier

- **Dosya:** `.prettierrc.js` (root)
- **Semicolon:** `false`
- **Single Quote:** `true`
- **Trailing Comma:** `none`
- **Print Width:** `120`

### Git

- **Branch Strategy:** feature/component-name
- **Commit Message:** conventional commits
- **Ignore:** node_modules, dist, .next, .env

## ğŸ“‹ Dosya Naming Conventions

### KlasÃ¶r Ä°simleri

```bash
src/
â”œâ”€â”€ components/     # React components
â”œâ”€â”€ hooks/         # Custom hooks
â”œâ”€â”€ services/      # API services
â”œâ”€â”€ utils/         # Utility functions
â”œâ”€â”€ types/         # TypeScript types
â”œâ”€â”€ constants/     # Constants
â””â”€â”€ styles/        # CSS/SCSS files
```

### Dosya Ä°simleri

```bash
# Components
UserProfile.tsx
UserProfile.module.css
UserProfile.test.tsx

# Hooks
useAuth.ts
useApi.ts

# Services
authService.ts
userService.ts

# Types
user.types.ts
api.types.ts
```

## ğŸ”„ Development Workflow

### 1. Yeni Feature

```bash
git checkout -b feature/user-authentication
# GeliÅŸtirme yap
pnpm format
pnpm lint
git add .
git commit -m "feat: add user authentication"
```

### 2. Code Review

```bash
# Format kontrolÃ¼
pnpm format:check

# Lint kontrolÃ¼
pnpm lint

# Type check
pnpm --filter web build
pnpm --filter api build
```

### 3. Deployment

```bash
# Production build
pnpm build:api
pnpm build:web

# Test
pnpm test
```

## ğŸ› ï¸ Tooling

### IDE AyarlarÄ±

```json
{
  "editor.formatOnSave": true,
  "editor.defaultFormatter": "esbenp.prettier-vscode",
  "typescript.preferences.importModuleSpecifier": "relative"
}
```

### VS Code Extensions

- Prettier
- ESLint
- TypeScript
- Tailwind CSS IntelliSense
- Auto Rename Tag

## ğŸ“Š Monitoring & Debugging

### Logging

```typescript
// API'de
console.log('[API]', message)

// Web'de
console.log('[WEB]', message)
```

### Error Handling

```typescript
// Ortak error formatÄ±
interface ApiError {
  message: string
  code: string
  timestamp: string
}
```

## ğŸ”’ Security

### Environment Variables

```bash
# .env.example dosyasÄ± oluÅŸtur
# Hassas bilgileri .env dosyasÄ±nda tut
# .env dosyasÄ±nÄ± git'e ekleme
```

### API Security

- CORS ayarlarÄ±
- Rate limiting
- Input validation
- SQL injection korumasÄ±

## ğŸ“ˆ Performance

### Build Optimizasyonu

- Tree shaking
- Code splitting
- Bundle analysis
- Image optimization

### Runtime Performance

- Memoization
- Lazy loading
- Caching strategies
- Database indexing

## ğŸ§ª Testing

### Test YapÄ±sÄ±

```bash
src/
â”œâ”€â”€ __tests__/
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ utils/
â””â”€â”€ __mocks__/
```

### Test KomutlarÄ±

```bash
pnpm --filter api test
pnpm --filter web test
pnpm test:coverage
```

## ğŸ“š Documentation

### README DosyalarÄ±

- Root README.md
- apps/api/README.md
- apps/web/README.md

### API Documentation

- Swagger/OpenAPI
- Postman collections
- API endpoint listesi

## ğŸš¨ Troubleshooting

### YaygÄ±n Sorunlar

1. **Port Ã§akÄ±ÅŸmasÄ±:** API 3001, Web 3000
2. **CORS hatasÄ±:** API CORS ayarlarÄ±
3. **Type errors:** TypeScript strict mode
4. **Build hatasÄ±:** Node version kontrolÃ¼

### Debug KomutlarÄ±

```bash
# Port kontrolÃ¼
netstat -ano | findstr :3000
netstat -ano | findstr :3001

# Process kontrolÃ¼
tasklist | findstr node

# Log kontrolÃ¼
pnpm dev:api > api.log 2>&1
pnpm dev:web > web.log 2>&1
```
